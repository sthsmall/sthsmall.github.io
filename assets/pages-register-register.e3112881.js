import{h as e,s as t,a as s,b as o,n as a,o as l,f as d,w as i,i as n,g as r,j as u,k as c,q as m,t as f,l as g,I as p,u as h}from"./index-03a9edbf.js";import{m as C}from"./index.0708a0a5.js";import{c as _}from"./code.487141bb.js";import{_ as T}from"./_plugin-vue_export-helper.1b428a4d.js";const w=T({data:()=>({username:"",email:"",code:"",passwd:"",getCodeText:"获取验证码",getCodeBtnColor:"#ffffff",getCodeisWaiting:!1}),onLoad(){},methods:{Timer(){},async getCode(){if(e(),this.getCodeisWaiting)return;this.getCodeText="发送中...",this.getCodeisWaiting=!0,this.getCodeBtnColor="rgba(255,255,255,0.5)";const s=await C({url:"/user/sendCode",method:"POST",data:{email:this.email}});console.log(s),setTimeout((()=>{t({title:"验证码已发送",icon:"none"}),this.setTimer()}),1e3)},setTimer(){let e=60;this.getCodeText="重新获取(60)",this.Timer=setInterval((()=>{if(e<=0)return this.getCodeisWaiting=!1,this.getCodeBtnColor="#ffffff",this.getCodeText="获取验证码",void clearInterval(this.Timer);this.getCodeText="重新获取("+e+")",e--}),1e3)},async doReg(){if(e(),""===this.phoneNumber||""===this.passwd)return t({title:"请填写正确手机号码",icon:"none"});s({title:"提交中..."});const l=await C({url:"/user/register",method:"POST",data:{email:this.email,username:this.username,password:this.passwd,code:this.code}});l.data.code===_.SAVE_OK?(o(),t({title:"注册成功",icon:"success"}),setTimeout((function(){a({url:"/pages/Login/Login"})}),1e3)):(o(),t({title:l.data.code,icon:"none"}))},toLogin(){e(),a({url:"../Login/Login"})}}},[["render",function(e,t,s,o,a,C){const _=n,T=g,w=p,x=h;return l(),d(_,null,{default:i((()=>[r(_,{class:"login_top"},{default:i((()=>[r(_,{class:"logo"}),r(T,{class:"title"},{default:i((()=>[u(" uniapp")])),_:1})])),_:1}),r(_,{class:"form"},{default:i((()=>[r(_,{class:"username"},{default:i((()=>[r(w,{placeholder:"请输入用户名",modelValue:a.username,"onUpdate:modelValue":t[0]||(t[0]=e=>a.username=e)},null,8,["modelValue"])])),_:1}),r(_,{class:"mail"},{default:i((()=>[c(' <view\r\n            class="get-code"\r\n            :style="{ color: getCodeBtnColor }"\r\n            @click.stop="getCode()"\r\n            >{{ getCodeText }}</view\r\n          > '),r(w,{placeholder:"请输入邮箱",modelValue:a.email,"onUpdate:modelValue":t[1]||(t[1]=e=>a.email=e)},null,8,["modelValue"])])),_:1}),r(_,{class:"code"},{default:i((()=>[r(w,{placeholder:"请输入验证码",modelValue:a.code,"onUpdate:modelValue":t[2]||(t[2]=e=>a.code=e)},null,8,["modelValue"]),r(T,{onClick:t[3]||(t[3]=m((e=>C.getCode()),["stop"]))},{default:i((()=>[u(f(a.getCodeText),1)])),_:1})])),_:1}),r(_,{class:"password"},{default:i((()=>[r(w,{placeholder:"请输入密码",modelValue:a.passwd,"onUpdate:modelValue":t[4]||(t[4]=e=>a.passwd=e),password:"true"},null,8,["modelValue"])])),_:1}),r(_,{class:"left"},{default:i((()=>[r(x,{value:""}),r(T,{style:{"font-size":"25upx"}},{default:i((()=>[u("我已阅读并同意")])),_:1})])),_:1}),r(_,{class:"btn",onClick:C.doReg},{default:i((()=>[u("立即注册")])),_:1},8,["onClick"]),r(_,{class:"res",style:{"font-size":"25upx"}},{default:i((()=>[r(_,{onClick:C.toLogin},{default:i((()=>[u("已有账号立即登录")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-b06337dc"]]);export{w as default};
