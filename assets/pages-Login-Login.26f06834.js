import{h as e,s as a,a as o,b as s,c as t,d as l,e as r,n as d,o as n,f as i,w as u,i as c,g as p,j as f,k as m,l as g,I as h,r as _}from"./index-03a9edbf.js";import{m as b}from"./index.0708a0a5.js";import{c as k}from"./code.487141bb.js";import{_ as w}from"./_plugin-vue_export-helper.1b428a4d.js";const C=w({data:()=>({phoneNumber:"",passwd:"",getCodeBtnColor:"#ffffff",getCodeisWaiting:!1,auto:!1,agree:!1}),onLoad(){uni.navigateBack=null},methods:{async doReg(){if(e(),!1===this.agree)return a({title:"请同意用户协议",icon:"none"});if(""===this.phoneNumber||""===this.passwd)return a({title:"请填写正确邮箱",icon:"none"});o({title:"提交中..."});const d=await b({url:"/user/login",method:"POST",data:{email:this.phoneNumber,password:this.passwd}});if(console.log(d),200!==d.statusCode)return s(),void a({title:"网络错误",icon:"error",duration:2e3});d.data.code===k.GET_ERR&&(s(),a({title:"账户或密码错误",icon:"error",duration:2e3})),d.data.code===k.GET_OK?(t("userId",d.data.data.userId),t("selectBankId",d.data.data.selectBankId),t("userData",d.data.data),l({key:"isLogin",data:!0,success:function(){s(),a({title:"登录成功",icon:"success"}),setTimeout((function(){r({url:"../index/index"})}),1e3)},complete:()=>{a({title:"登录成功",icon:"success"})}})):(s(),a({title:d.data,icon:"none"}))},toLogin(){e(),d({url:"../register/register"})},toForget(){e(),d({url:"../resetPassword/resetPassword"})}}},[["render",function(e,a,o,s,t,l){const r=c,d=g,b=h,k=_("van-checkbox");return n(),i(r,null,{default:u((()=>[p(r,{class:"login_top"},{default:u((()=>[p(r,{class:"logo",style:{"background-color":"blue"}}),p(d,{class:"title"},{default:u((()=>[f(" uniapp")])),_:1})])),_:1}),p(r,{class:"form userform",style:{}},{default:u((()=>[p(r,{class:"username"},{default:u((()=>[p(b,{placeholder:"请输入邮箱",modelValue:t.phoneNumber,"onUpdate:modelValue":a[0]||(a[0]=e=>t.phoneNumber=e),"placeholder-style":"color: rgba(175, 175, 175, 0.8);"},null,8,["modelValue"])])),_:1}),p(r,{class:"password"},{default:u((()=>[p(b,{placeholder:"请输入密码",modelValue:t.passwd,"onUpdate:modelValue":a[1]||(a[1]=e=>t.passwd=e),password:"true","placeholder-style":"color: rgba(175, 175, 175, 0.8);"},null,8,["modelValue"])])),_:1}),m(' <view class="radios">\r\n        <van-checkbox class="radio" v-model="auto"  />\r\n        <text>自动登录</text>\r\n      </view> '),p(r,{class:"radios"},{default:u((()=>[p(k,{class:"radio",modelValue:t.agree,"onUpdate:modelValue":a[2]||(a[2]=e=>t.agree=e)},null,8,["modelValue"]),p(d,null,{default:u((()=>[f("我已阅读并同意")])),_:1})])),_:1}),p(r,{class:"btn",onClick:l.doReg},{default:u((()=>[f("立即登录")])),_:1},8,["onClick"]),p(r,{class:"res"},{default:u((()=>[p(r,{onClick:l.toLogin},{default:u((()=>[f("前去注册")])),_:1},8,["onClick"]),p(r,{onClick:l.toForget},{default:u((()=>[f("忘记密码？")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-75c230b0"]]);export{C as default};
