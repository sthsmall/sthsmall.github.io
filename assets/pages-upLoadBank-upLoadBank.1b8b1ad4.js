import{v as e,s as t,n as s,o as l,m as a,g as o,w as n,F as i,i as d,r as c,k as r,j as u}from"./index-03a9edbf.js";import{M as m}from"./myNav.2499e92c.js";import{m as h}from"./index.0708a0a5.js";import{c as p}from"./code.487141bb.js";import{_ as k}from"./_plugin-vue_export-helper.1b428a4d.js";import"./uni-nav-bar.d4137c9f.js";import"./uni-icons.605a44a3.js";import"./uni-app.es.d35c5a99.js";const f=k({components:{myNav:m},data:()=>({text:"",title:"上传题库",showPicker1:!1,showPicker2:!1,firstData:[],secondData:[],active:0,secondResult:"",message:"",firstResult:"",firstResultid:"",secondResultid:"",acknowledges:""}),methods:{onConfirmFirst({selectedValues:e,selectedOptions:t,selectedIndexes:s}){var l;this.firstResult=null==(l=t[0])?void 0:l.text,this.firstResultid=e[0],this.showPicker1=!1,console.log("click",this.firstResultid),this.getSecondCate()},onCancelFirst(){this.showPicker1=!1},firstClick(){this.showPicker1=!0,this.getFirstCate()},onConfirmSecond({selectedValues:e,selectedOptions:t,selectedIndexes:s}){var l;this.secondResult=null==(l=t[0])?void 0:l.text,this.secondResultid=e[0],this.showPicker2=!1,console.log("click",this.secondResultid)},onCancelSecond(){this.showPicker2=!1},secondClick(){this.showPicker2=!0},async getFirstCate(){const e=await h({url:"/bank/getFirstCate"});e.data.code===p.GET_OK&&(this.firstData=e.data.data.map((e=>({text:e.name,value:e.id}))))},async getSecondCate(){const e=await h({url:"/bank/getSecondCate",data:{subjectClassId:this.firstResultid}});e.data.code===p.GET_OK&&(this.secondData=e.data.data.map((e=>({text:e.name,value:e.id}))),console.log(this.secondData))},submit(){h({url:"/bank/createNewBank",data:{bankName:this.text,userId:e("userId"),subjectId:this.secondResultid,detail:this.message}}).then((e=>{console.log(e),e.data.code===p.GET_OK&&(t({title:"上传成功"}),s({url:"/pages/upLoadBank/upLoadQuest/upLoadQuest"}))}))}}},[["render",function(e,t,s,m,h,p){const k=c("my-nav"),f=c("van-field"),C=c("van-picker"),w=c("van-popup"),g=c("van-cell-group"),v=d,b=c("van-button");return l(),a(i,null,[o(v,null,{default:n((()=>[o(k,{title:h.title},null,8,["title"]),o(g,{inset:""},{default:n((()=>[r(" 输入任意文本 "),o(f,{modelValue:h.text,"onUpdate:modelValue":t[0]||(t[0]=e=>h.text=e),"label-align":"center",label:"题库名称"},null,8,["modelValue"]),r(" 输入手机号，调起手机号键盘 "),o(f,{modelValue:h.firstResult,"onUpdate:modelValue":t[1]||(t[1]=e=>h.firstResult=e),"is-link":"",readonly:"",name:"picker",label:"题库一级分类",placeholder:"题库一级分类",onClick:p.firstClick},null,8,["modelValue","onClick"]),o(w,{show:h.showPicker1,position:"bottom"},{default:n((()=>[o(C,{columns:h.firstData,onConfirm:p.onConfirmFirst,onCancel:p.onCancelFirst},null,8,["columns","onConfirm","onCancel"])])),_:1},8,["show"]),r(" 允许输入正整数，调起纯数字键盘 "),o(f,{modelValue:h.secondResult,"onUpdate:modelValue":t[2]||(t[2]=e=>h.secondResult=e),"is-link":"",readonly:"",name:"picker",label:"题库二级分类",placeholder:"题库二级分类",onClick:p.secondClick},null,8,["modelValue","onClick"]),o(w,{show:h.showPicker2,"onUpdate:show":t[3]||(t[3]=e=>h.showPicker2=e),position:"bottom"},{default:n((()=>[o(C,{columns:h.secondData,onConfirm:p.onConfirmSecond,onCancel:p.onCancelSecond},null,8,["columns","onConfirm","onCancel"])])),_:1},8,["show"]),o(g,{inset:""},{default:n((()=>[o(f,{modelValue:h.acknowledges,"onUpdate:modelValue":t[4]||(t[4]=e=>h.acknowledges=e),label:"输入知识点",placeholder:"请输入知识点"},null,8,["modelValue"])])),_:1}),o(f,{modelValue:h.message,"onUpdate:modelValue":t[5]||(t[5]=e=>h.message=e),rows:"2",autosize:"","label-align":"center",label:"描述",type:"textarea",maxlength:"50",placeholder:"请输入题库描述","show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1}),o(b,{style:{width:"80vw",margin:"5vh auto"},onClick:p.submit,type:"preimer"},{default:n((()=>[u(" 提交 ")])),_:1},8,["onClick"])],64)}]]);export{f as default};
