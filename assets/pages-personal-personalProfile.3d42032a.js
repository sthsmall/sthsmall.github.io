import{A as e,e as a,v as l,b as s,s as t,o as i,m as o,g as d,w as r,F as n,i as u,j as p,x as c,t as m,l as h,r as f}from"./index-03a9edbf.js";import{m as v,b as _}from"./index.0708a0a5.js";import{c as g}from"./code.487141bb.js";import{_ as w}from"./_plugin-vue_export-helper.1b428a4d.js";const P=w({setup(){const a=e([]);return{value:a,handleAfterRead:e=>{e.length>0&&(a.value=[{url:e[0].url}])}}},data:()=>({avatar:"https://zpss.info:10475/avatar/default.jpg",email:"2773209553@qq.com",username:"王小明",password:"123456",registerTime:"2023-12-16",profileDescrip:"这个家伙很懒，没有留下任何介绍",showPopup:!1,editedUsername:"",editedProfileDescrip:""}),methods:{goBack(){a({url:"/pages/personal/personal"})},modify(){this.showPopup=!0,this.editedUsername=this.username,this.editedProfileDescrip=this.profileDescrip},saveChanges(){this.username=this.editedUsername,this.profileDescrip=this.editedProfileDescrip,this.avatar=this.value.length>0?this.value[0].objectUrl:this.avatar,console.log(typeof this.value[0].objectUrl),this.showPopup=!1},cancelEdit(){this.showPopup=!1}},async onLoad(){const e=await v({url:"/user/showInfo",method:"GET",data:{userId:l("userId")}});if(200!==e.statusCode)return s(),void t({title:"网络错误",icon:"error",duration:2e3});e.data.code===g.GET_OK&&(this.username=e.data.data.nickname,this.email=e.data.data.email,this.avatar=_+e.data.data.avatarPath,this.registerTime=e.data.data.registerTime,this.profileDescrip=e.data.data.bio,console.log(e.data.data))}},[["render",function(e,a,l,s,t,v){const _=h,g=u,w=f("van-image"),P=f("van-button"),y=f("van-uploader"),C=f("van-field"),U=f("van-cell-group"),V=f("van-popup");return i(),o(n,null,[d(g,{class:"header"},{default:r((()=>[d(g,{class:"header-left",onClick:a[0]||(a[0]=e=>v.goBack())},{default:r((()=>[d(_,{class:"back-icon"},{default:r((()=>[p("<")])),_:1})])),_:1}),d(g,{class:"header-title"},{default:r((()=>[p(" 个人资料 ")])),_:1})])),_:1}),d(g,{class:"list"},{default:r((()=>[c("div",{class:"detail"},[c("span",null,"头像"),d(w,{round:"",width:"50",height:"50",src:t.avatar},null,8,["src"])]),c("div",{class:"detail"},[c("span",null,"账号"),c("span",null,m(t.email),1)]),c("div",{class:"detail"},[c("span",null,"用户名"),c("span",null,m(t.username),1)]),c("div",{class:"detail"},[c("span",null,"注册时间"),c("span",null,m(t.registerTime),1)]),c("div",{class:"detail"},[c("span",null,"个人简介"),c("span",{class:"profileContent"},m(t.profileDescrip),1)])])),_:1}),d(g,{class:"update"},{default:r((()=>[d(P,{type:"primary",size:"large",onClick:v.modify},{default:r((()=>[p("修改信息")])),_:1},8,["onClick"])])),_:1}),d(g,null,{default:r((()=>[d(V,{"close-icon":"close",show:t.showPopup,"onUpdate:show":a[5]||(a[5]=e=>t.showPopup=e),position:"center"},{default:r((()=>[d(g,null,{default:r((()=>[c("div",{class:"modifyPerson"},"编辑个人信息"),d(U,{inset:""},{default:r((()=>[d(C,{name:"uploader",label:"头像上传"},{input:r((()=>[d(y,{modelValue:s.value,"onUpdate:modelValue":a[1]||(a[1]=e=>s.value=e),onAfterRead:s.handleAfterRead,multiple:"","max-count":1},null,8,["modelValue","onAfterRead"])])),_:1}),d(C,{modelValue:t.editedUsername,"onUpdate:modelValue":a[2]||(a[2]=e=>t.editedUsername=e),label:"用户名"},null,8,["modelValue"]),d(C,{modelValue:t.password,"onUpdate:modelValue":a[3]||(a[3]=e=>t.password=e),label:"密码",type:"password"},null,8,["modelValue"]),d(C,{modelValue:t.editedProfileDescrip,"onUpdate:modelValue":a[4]||(a[4]=e=>t.editedProfileDescrip=e),label:"个人简介",type:"textarea",rows:"3"},null,8,["modelValue"]),d(g,{class:"actions"},{default:r((()=>[d(P,{type:"default",onClick:v.cancelEdit},{default:r((()=>[p("取消")])),_:1},8,["onClick"]),d(P,{type:"primary",onClick:v.saveChanges},{default:r((()=>[p("保存")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])])),_:1})],64)}],["__scopeId","data-v-a70095ae"]]);export{P as default};
