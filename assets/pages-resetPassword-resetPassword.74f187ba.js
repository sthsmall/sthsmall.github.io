import{h as e,s as t,a as o,b as s,n as a,o as l,f as i,w as d,i as n,g as r,j as u,k as c,q as g,t as m,l as f,I as p}from"./index-03a9edbf.js";import{m as h}from"./index.0708a0a5.js";import{_ as C}from"./_plugin-vue_export-helper.1b428a4d.js";const _=C({data:()=>({phoneNumber:"",code:"",passwd:"",getCodeText:"获取验证码",getCodeBtnColor:"#ffffff",getCodeisWaiting:!1}),onLoad(){},methods:{Timer(){},async getCode(){if(e(),this.getCodeisWaiting)return;this.getCodeText="发送中...",this.getCodeisWaiting=!0,this.getCodeBtnColor="rgba(255,255,255,0.5)";const o=await h({url:`/user/code/${this.phoneNumber}`,method:"GET"});console.log(o),setTimeout((()=>{t({title:"验证码已发送",icon:"none"}),this.setTimer()}),1e3)},setTimer(){let e=60;this.getCodeText="重新获取(60)",this.Timer=setInterval((()=>{if(e<=0)return this.getCodeisWaiting=!1,this.getCodeBtnColor="#ffffff",this.getCodeText="获取验证码",void clearInterval(this.Timer);this.getCodeText="重新获取("+e+")",e--}),1e3)},async doReg(){if(e(),""===this.phoneNumber||""===this.passwd)return t({title:"请填写正确手机号码",icon:"none"});o({title:"提交中..."});const l=await h({url:"/user/register",method:"POST",data:{username:this.phoneNumber,password:this.passwd,code:this.code}});200===l.statusCode?(s(),t({title:"注册成功",icon:"success"}),setTimeout((function(){a({url:"/pages/Login/Login"})}),1e3)):(s(),t({title:l.data,icon:"none"}))},toLogin(){e(),a({url:"../Login/Login"})}}},[["render",function(e,t,o,s,a,h){const C=n,_=f,T=p;return l(),i(C,null,{default:d((()=>[r(C,{class:"login_top"},{default:d((()=>[r(C,{class:"logo"}),r(_,{class:"title"},{default:d((()=>[u(" uniapp")])),_:1})])),_:1}),r(C,{class:"form"},{default:d((()=>[r(C,{class:"mail"},{default:d((()=>[c(' <view\r\n            class="get-code"\r\n            :style="{ color: getCodeBtnColor }"\r\n            @click.stop="getCode()"\r\n            >{{ getCodeText }}</view\r\n          > '),r(T,{placeholder:"请输入邮箱",modelValue:a.phoneNumber,"onUpdate:modelValue":t[0]||(t[0]=e=>a.phoneNumber=e)},null,8,["modelValue"])])),_:1}),r(C,{class:"code"},{default:d((()=>[r(T,{placeholder:"请输入验证码",modelValue:a.code,"onUpdate:modelValue":t[1]||(t[1]=e=>a.code=e)},null,8,["modelValue"]),r(_,{onClick:t[2]||(t[2]=g((e=>h.getCode()),["stop"]))},{default:d((()=>[u(m(a.getCodeText),1)])),_:1})])),_:1}),r(C,{class:"password"},{default:d((()=>[r(T,{placeholder:"请输入新密码",modelValue:a.passwd,"onUpdate:modelValue":t[3]||(t[3]=e=>a.passwd=e),password:"true"},null,8,["modelValue"])])),_:1}),r(C,{class:"btn",onClick:h.doReg},{default:d((()=>[u("重设密码")])),_:1},8,["onClick"]),r(C,{class:"res"},{default:d((()=>[r(C,{onClick:h.toLogin},{default:d((()=>[u("已有账号立即登录")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-3d621c46"]]);export{_ as default};
