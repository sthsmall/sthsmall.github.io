import{s as e,o as t,m as o,g as i,w as n,j as l,F as a,y as s,f as r,k as u,t as d,r as p}from"./index-03a9edbf.js";import{m as c}from"./index.0708a0a5.js";import{c as m}from"./code.487141bb.js";import{_ as h}from"./_plugin-vue_export-helper.1b428a4d.js";const y=h({props:{initialQuestionType:String,initialQuestion:String,initialOptions:Array,initialCorrectAnswer:String,initialCorrectAnswers:Array,initialAnalysis:String,isHavebutton:Boolean},data(){return{questionType:this.initialQuestionType,question:this.initialQuestion,options:this.initialOptions,correctAnswer:this.initialCorrectAnswer,correctAnswers:this.initialCorrectAnswers,analysis:this.initialAnalysis}},methods:{addOption(){this.options.push({text:""})},deleteOption(e){this.options.splice(e,1)},getOptionLabel:e=>String.fromCharCode(65+e),formatCorrectAnswer(){return"single"===this.questionType?this.correctAnswer:"multiple"===this.questionType?this.correctAnswers.map((e=>this.getOptionLabel(e))).join(""):"true"===this.correctAnswer?"A":"B"},submitQuestion(){this.upLoadSignal(this.bankId)},upLoadSignal(t){c({url:"/bank/singleUpload",method:"POST",data:{bankId:t,type:"single"===this.questionType?0:"multiple"===this.questionType?1:2,itemStem:this.question,optionsNum:this.options.length,options:this.options.map((e=>e.text)),correctOption:this.formatCorrectAnswer(),analysis:this.analysis,knowledgePoints:[]}}).then((t=>{console.log(t),t.data.code==m.GET_OK&&e({title:"上传成功"})}))},onLoad(e){this.bankId=e.bankId}}},[["render",function(e,c,m,h,y,f){const g=p("van-radio"),b=p("van-radio-group"),k=p("van-field"),A=p("van-button"),V=p("van-checkbox"),w=p("van-checkbox-group");return t(),o("div",{class:"form-container"},[i(b,{modelValue:y.questionType,"onUpdate:modelValue":c[0]||(c[0]=e=>y.questionType=e),direction:"horizontal",class:"radio-group"},{default:n((()=>[i(g,{name:"single"},{default:n((()=>[l("单选题")])),_:1}),i(g,{name:"multiple"},{default:n((()=>[l("多选题")])),_:1}),i(g,{name:"truefalse"},{default:n((()=>[l("判断题")])),_:1})])),_:1},8,["modelValue"]),i(k,{modelValue:y.question,"onUpdate:modelValue":c[1]||(c[1]=e=>y.question=e),label:"题目",placeholder:"请输入题目内容"},null,8,["modelValue"]),"truefalse"!==y.questionType?(t(),o("div",{key:0,class:"options"},[(t(!0),o(a,null,s(y.options,((e,o)=>(t(),r(k,{key:o,modelValue:y.options[o].text,"onUpdate:modelValue":e=>y.options[o].text=e,label:f.getOptionLabel(o),placeholder:"请输入选项内容",type:"text",onClickRightIcon:e=>f.deleteOption(o),"right-icon":"delete"},null,8,["modelValue","onUpdate:modelValue","label","onClickRightIcon"])))),128)),i(A,{type:"info",icon:"plus",onClick:f.addOption},{default:n((()=>[l("添加选项")])),_:1},8,["onClick"])])):u("v-if",!0),"single"===y.questionType?(t(),r(k,{key:1,modelValue:y.correctAnswer,"onUpdate:modelValue":c[2]||(c[2]=e=>y.correctAnswer=e),label:"正确答案",placeholder:"请输入正确答案"},null,8,["modelValue"])):u("v-if",!0),"multiple"===y.questionType?(t(),r(w,{key:2,direction:"horizontal",modelValue:y.correctAnswers,"onUpdate:modelValue":c[3]||(c[3]=e=>y.correctAnswers=e),class:"checkbox-group"},{default:n((()=>[(t(!0),o(a,null,s(y.options,((e,o)=>(t(),r(V,{key:o,name:o},{default:n((()=>[l(d(f.getOptionLabel(o)),1)])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])):u("v-if",!0),"truefalse"===y.questionType?(t(),r(b,{key:3,modelValue:y.correctAnswer,"onUpdate:modelValue":c[4]||(c[4]=e=>y.correctAnswer=e),direction:"horizontal",class:"radio-group"},{default:n((()=>[i(g,{name:"true"},{default:n((()=>[l("正确")])),_:1}),i(g,{name:"false"},{default:n((()=>[l("错误")])),_:1})])),_:1},8,["modelValue"])):u("v-if",!0),i(k,{modelValue:y.analysis,"onUpdate:modelValue":c[5]||(c[5]=e=>y.analysis=e),label:"题目解析",placeholder:"请输入题目解析"},null,8,["modelValue"]),m.isHavebutton?(t(),r(A,{key:4,type:"primary",onClick:f.submitQuestion},{default:n((()=>[l("提交题目")])),_:1},8,["onClick"])):u("v-if",!0)])}],["__scopeId","data-v-0e4106fb"]]);export{y as Q};
